<html>
<head>
<style>
button{background-color:dodgerblue;color:rgb(224,224,224);width:150px;height:47px;border:0;font-size:16px;border-radius:30px;margin-left:20px;margin-right:20px;margin-top:25px;opacity:0.7;transition:0.3s}button:hover{opacity:1;color:rgb(255,254,254);transform:translate(0px,-5px)}#select-container{display:grid;grid-template-columns:150px 150px;grid-column-gap:10px;width:310px;position:relative;vertical-align:middle;padding:0;overflow:hidden;background-color:#fff;color:#555;border:1px solid #aaa;text-shadow:none;border-radius:4px;transition:box-shadow 0.25s ease;z-index:2;margin:30px}#select-container:hover{box-shadow:0 1px 4px rgba(0,0,0,0.15)}#select-container select{cursor:pointer;padding:10px;width:100%;border:none;background:transparent;background-image:none;font-size:16px}#select-container select:focus{outline:none}
</style>
</head>
<body>
<button id="start">开始</button>
<button id="stop">结束</button>
<button id="reset">重置</button>
<div id="select-container"></div>
</body>
<script type="text/javascript">
window.AudioContext = window.AudioContext || window.webkitAudioContext; var audioCtx = new AudioContext(); window.timer; build_frequency_selecter(150, 1000); build_meter_selecter(60, 300);var start_button = document.getElementById('start'); start_button.addEventListener('click', () => { Meter(sounds) }); var stop_button = document.getElementById('stop'); stop_button.addEventListener('click', () => { clearInterval(timer); timer_flag = false }); var start_button = document.getElementById('reset'); start_button.addEventListener('click', () => { reset_Meter(sounds) }); var timer_flag = false; var timer; reset_Meter = (func) => { if (timer_flag) clearInterval(timer); var frequency = document.getElementById("select-frequency"); var the_frequency = frequency.value; var meter = document.getElementById("select-meter"); var the_meter = meter.value; timer_flag = true; func(the_frequency); return timer = setInterval(() => { func(the_frequency) }, 60 / the_meter * 1000) }; Meter = (func) => { if (timer_flag) return; var frequency = document.getElementById("select-frequency"); var the_frequency = frequency.value; var meter = document.getElementById("select-meter"); var the_meter = meter.value; timer_flag = true; func(the_frequency); return timer = setInterval(() => { func(the_frequency) }, 60 / the_meter * 1000) }; function sounds(frequency) { if (frequency == undefined) frequency = 400; var oscillator = audioCtx.createOscillator(); var gainNode = audioCtx.createGain(); oscillator.connect(gainNode); gainNode.connect(audioCtx.destination); oscillator.type = 'sine'; oscillator.frequency.value = frequency; gainNode.gain.setValueAtTime(0, audioCtx.currentTime); gainNode.gain.linearRampToValueAtTime(1, audioCtx.currentTime + 0.01); oscillator.start(audioCtx.currentTime); gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.4); oscillator.stop(audioCtx.currentTime + 0.5) }; function build_frequency_selecter(low, hight) { var selecter = document.createElement("select"); selecter.id = "select-frequency"; document.getElementById("select-container").appendChild(selecter); for (let i = low; i <= hight; i = i + 50) { var options = document.createElement("option"); options.value = i; options.textContent = '频率 ' + i + ' HZ'; if (i == 400) options.selected = true; selecter.appendChild(options) } }; function build_meter_selecter(low, hight) { var meter = document.createElement("select"); meter.id = "select-meter"; document.getElementById("select-container").appendChild(meter); for (let i = low; i <= hight; i = i + 5) { var options = document.createElement("option"); options.value = i; options.textContent = i + ' BMP'; if (i == 90) options.selected = true; meter.appendChild(options) } };
</script>
</html>